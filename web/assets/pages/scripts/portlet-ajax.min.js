var PortletAjax = function() {
    var API_DELETE_URL = "";
    var API_LIST_URL = "";
    var init = function () {
    };
    var setAPIDeleteUrl = function (url) {
        API_DELETE_URL = url;
    };

    var setAPIListUrl = function (url) {
        API_LIST_URL = url;
    };

    var loadContent = function(url) {
        API_LIST_URL = url ? url : API_LIST_URL;
        if (API_LIST_URL !== "") {
            App.blockUI({
                target: $("#admin-portlet-ajax").find('.portlet-list'),
                animate: false,
                boxed: true,
                overlayColor: "none"
            });
            $.post(API_LIST_URL, $("#formSearch").serialize(), function (result) {
                App.unblockUI();
                $("#admin-portlet-ajax").find(".portlet-list").html(result);
            });
        } else {
            alert("Missing API_LIST_URL");
        }
    };
    
    var removeContent = function (id) {
        if (API_DELETE_URL !== "") {
            if (confirm("Are you sure delete this record?")) {
                App.blockUI({
                    target: $("#admin-portlet-ajax").find('.portlet-list'),
                    animate: false,
                    boxed: true,
                    overlayColor: "none"
                });
                $.post(API_DELETE_URL, { id: id }, function (result) {
                    App.unblockUI();
                    loadContent();
                });
            }
            return false;
        } else {
            alert("Missing API_DELETE_URL");
        }
    };

    return {
        init: function() {
            init();
        },
        loadContent: function (url) {
            loadContent(url);
        },
        removeContent: function (id) {
            removeContent(id);
        },
        setAPIDeleteUrl: function (url) {
            setAPIDeleteUrl(url);
        },
        setAPIListUrl: function (url) {
            setAPIListUrl(url);
        },
    }
}();
jQuery(document).ready(function() {
    PortletAjax.init()
});